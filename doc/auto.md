# Auto
主要记录下auto是如何从c生成汇编语言的

全局声明如下:

```
void main()
{
    auto a = 1;
}
```
生成未优化的代码:
```
# Code auto-generated by UCC

.data

.text

.globl	main

main:
	pushl %ebp
	pushl %ebx
	pushl %esi
	pushl %edi
	movl %esp, %ebp
	subl $4, %esp
.BB0:
	movl $1, -4(%ebp)
.BB1:
	movl %ebp, %esp
	popl %edi
	popl %esi
	popl %ebx
	popl %ebp
	ret

```
## 词法分析
---
在keyword.h加入auto关键词，token.h增加TK_SIGNED

## 语法分析
---

.auto 在语法分析阶段作为storage classes。和TK_STATIC分支一样，添加TK_AUTO

## 语义分析
---
auto a = 1;属于funciotn里面的compoundStmt的localdeclaration，CheckLocalDeclaration分析，把符号a添加到符号表中和compStmt的ilocals中.
auto添加specs->sclass,因为没有type，所以默认specs->ty = T(INT);
之后就是解析int a = 1;的声明

## 中间代码生成
---
TranslateCompoundStatement生成int a = 1
循环ilocals成员，GenerateMove生成dst=a, src=1
```
	for (i = 0; i < LEN(ilocals); i++) {
		InitData initd;
		Type ty;
		Symbol src, dst;
		v = GET_ITEM(ilocals, i);
		initd = AsVar(v)->idata;
		while (initd) {
			ty = initd->expr->ty;
			src = TranslateExpression(initd->expr);
			dst = CreateOffset(ty, v, 0);
			GenerateMove(ty, dst, src);
			initd = initd->next;
		}
	}
```
## 汇编代码生成
---
